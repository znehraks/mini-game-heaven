# Git Configuration
# claude-symphony Git auto-commit rules (Issue #15 resolution)

git:
  # Auto-commit settings
  auto_commit:
    enabled: true

    # Trigger events
    triggers:
      on_task_complete: true      # On task completion
      on_stage_complete: true     # On stage completion
      on_checkpoint: true         # On checkpoint creation
      on_milestone: true          # On milestone completion

  # Commit message rules (Conventional Commits)
  commit_convention:
    format: "<type>(<scope>): <description>"

    # Commit types
    types:
      - name: "feat"
        description: "New feature"
        stages: ["06-implementation"]

      - name: "fix"
        description: "Bug fix"
        stages: ["08-qa"]

      - name: "refactor"
        description: "Code refactoring"
        stages: ["07-refactoring"]

      - name: "test"
        description: "Test addition/modification"
        stages: ["09-testing"]

      - name: "docs"
        description: "Documentation modification"
        stages: ["all"]

      - name: "chore"
        description: "Other changes"
        stages: ["10-deployment"]

      - name: "style"
        description: "Code style changes"
        stages: ["04-ui-ux", "06-implementation"]

      - name: "perf"
        description: "Performance improvement"
        stages: ["07-refactoring"]

      - name: "ci"
        description: "CI/CD configuration"
        stages: ["10-deployment"]

    # Stage-specific scope mapping
    scope_mapping:
      "01-brainstorm": "brainstorm"
      "02-research": "research"
      "03-planning": "plan"
      "04-ui-ux": "ui"
      "05-task-management": "tasks"
      "06-implementation": "impl"
      "07-refactoring": "refactor"
      "08-qa": "qa"
      "09-testing": "test"
      "10-deployment": "deploy"

    # Description rules
    description_rules:
      max_length: 72
      language: "English"         # Korean | English
      start_with_verb: true       # Start with verb
      no_period_at_end: true      # No period at end

  # Commit message examples
  examples:
    task_complete: "feat(impl): implement user authentication"
    stage_complete: "chore(impl): complete Stage 06 - generate HANDOFF.md"
    bug_fix: "fix(qa): fix login session expiry bug"
    refactor: "refactor(refactor): optimize auth service code"
    test: "test(test): add user authentication E2E tests"

  # Branch rules
  branch:
    # Branch naming
    naming:
      feature: "feature/{stage}-{task-id}"
      bugfix: "bugfix/{issue-id}"
      release: "release/v{version}"

    # Default branch
    default: "main"
    develop: "develop"

    # Stage-specific branch strategy
    strategy: "feature-branch"   # feature-branch | trunk-based

  # Automation actions
  automation:
    # On task completion
    on_task_complete:
      actions:
        - "stage_changes"
        - "generate_commit_message"
        - "commit"

    # On stage completion
    on_stage_complete:
      actions:
        - "stage_all_changes"
        - "generate_stage_commit_message"
        - "commit"
        - "create_tag"

    # On checkpoint
    on_checkpoint:
      actions:
        - "commit_all"
        - "create_checkpoint_tag"

  # Commit message generation templates
  templates:
    task_complete: |
      {{type}}({{scope}}): {{description}}

      Task: {{task_id}}
      Stage: {{stage_id}}

    stage_complete: |
      chore({{scope}}): complete Stage {{stage_number}}

      Completed tasks:
      {{#each completed_tasks}}
      - {{this}}
      {{/each}}

      Next stage: {{next_stage}}

    checkpoint: |
      chore(checkpoint): {{description}}

      Stage: {{stage_id}}
      Checkpoint: {{checkpoint_id}}
      Created: {{timestamp}}

# Prohibited actions
prohibited:
  - "Commit without commit message"
  - "WIP commits (temporary saves)"
  - "Starting with uppercase (for English)"
  - "Meaningless commit messages"

# Recommended actions
recommended:
  - "Commit in small units"
  - "Meaningful commit messages"
  - "Stage only related files"
  - "Run lint/format before commit"
