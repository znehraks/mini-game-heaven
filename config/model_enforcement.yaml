# AI Model Enforcement Configuration
# claude-symphony AI model role distribution and enforcement settings

model_enforcement:
  enabled: true

  # ClaudeCode direct handling (no external AI call needed)
  claudecode_direct:
    operations:
      - "npm run lint"
      - "npm run build"
      - "npm run test"
      - "npm run format"
      - "git status"
      - "git add"
      - "git commit"
      - "ls/cat/find"
      - "File reading"
      - "Simple modifications (< 10 lines)"
      - "Config file editing"
      - "Documentation writing/editing"

    characteristics:
      - max_lines_change: 10
      - complexity: "low"
      - no_architectural_impact: true

  # External AI call required
  external_ai_required:
    # Gemini required tasks
    gemini_tasks:
      - "Divergent idea generation"
      - "Creative brainstorming"
      - "Web research (Reddit, HackerNews)"
      - "Market research"
      - "User persona creation"
      - "UI/UX design ideas"

    # Codex required tasks
    codex_tasks:
      - "Code refactoring (> 10 lines)"
      - "Performance optimization"
      - "Complex bug fixes"
      - "Architecture improvements"
      - "Design pattern application"
      - "Test code generation"
      - "E2E test writing"

# Stage-specific auto-invoke settings
stage_auto_invoke:
  "01-brainstorm":
    model: "gemini"
    trigger: "stage_start"
    prompt_file: "prompts/ideation.md"
    required: true
    wrapper: "scripts/gemini-wrapper.sh"

  "03-planning":
    model: "gemini"
    trigger: "architecture_design"
    prompt_file: "prompts/architecture.md"
    required: false
    wrapper: "scripts/gemini-wrapper.sh"

  "04-ui-ux":
    model: "gemini"
    trigger: "design_ideation"
    prompt_file: "prompts/ui_concepts.md"
    required: false
    wrapper: "scripts/gemini-wrapper.sh"

  "07-refactoring":
    model: "codex"
    trigger: "refactoring_start"
    prompt_file: "prompts/code_analysis.md"
    required: true
    wrapper: "scripts/codex-wrapper.sh"
    flags: "--full-auto"

  "09-testing":
    model: "codex"
    trigger: "test_generation"
    prompt_file: "prompts/test_generation.md"
    required: true
    wrapper: "scripts/codex-wrapper.sh"
    flags: "--full-auto"

# Role distribution guidelines
role_guidelines:
  claudecode:
    strengths:
      - "File system operations"
      - "Build/test execution"
      - "Git operations"
      - "Documentation structuring"
      - "Code review (reading)"
    avoid:
      - "Large-scale code generation"
      - "Creative idea requests"
      - "Web research-based tasks"

  gemini:
    strengths:
      - "Creative ideas"
      - "Web research"
      - "Market analysis"
      - "UI/UX concepts"
    avoid:
      - "Code writing/editing"
      - "File system operations"
      - "Git operations"

  codex:
    strengths:
      - "Code writing/editing"
      - "Refactoring"
      - "Test writing"
      - "Bug fixing"
    avoid:
      - "Creative ideas"
      - "Web research"
      - "Documentation writing"

# Enforcement validation
enforcement_validation:
  warn_on_violation: true
  block_on_violation: false

  # Violation detection rules
  violation_rules:
    - condition: "refactoring_without_codex"
      stage: "07-refactoring"
      message: "Refactoring tasks should be performed through Codex. Use /codex command"

    - condition: "brainstorm_without_gemini"
      stage: "01-brainstorm"
      message: "Idea generation should be performed through Gemini. Use /gemini command"

    - condition: "large_code_change_direct"
      threshold_lines: 10
      message: "For code changes over 10 lines, using Codex is recommended."
