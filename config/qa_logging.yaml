# Q&A Logging Configuration
# claude-symphony Q&A auto-recording rules (Q7 resolution)

qa_logging:
  # Enable/disable
  enabled: true

  # Target file for recording
  target_file: "feedback.md"

  # Backup location
  backup_dir: "state/qa_backups/"

# Recording triggers
triggers:
  # Automatic triggers
  automatic:
    - event: "stage_complete"
      description: "On stage completion"
      priority: "high"

    - event: "issue_discovered"
      description: "On new issue discovery"
      priority: "high"

    - event: "process_change_request"
      description: "On process change request"
      priority: "medium"

    - event: "tool_failure"
      description: "On tool failure"
      priority: "high"

    - event: "workaround_found"
      description: "On workaround discovery"
      priority: "medium"

  # Manual trigger command
  manual:
    command: "/log-qa"
    description: "Manually record Q&A"

# Recording format
format:
  # Section header
  section_header: "### Q{{number}}: {{title}}"

  # Recording template
  template: |
    ### Q{{number}}: {{title}}

    **Question**: {{question}}

    **Answer**: {{answer}}

    **Solution**: {{solution}}

    **Future Improvement Suggestions**: {{suggestion}}

    **Related Stage**: {{stage_id}}

    **Recorded At**: {{timestamp}}

    ---

  # Include items
  include:
    - question          # Original question
    - answer            # Summarized answer
    - solution          # Solution
    - suggestion        # Future improvement suggestions
    - stage_id          # Related stage
    - timestamp         # Recording time
    - category          # Category

# Category classification
categories:
  - name: "workflow_improvements"
    description: "Workflow improvements"
    keywords: ["process", "stage", "order", "automation"]

  - name: "tool_usage"
    description: "Tool usage"
    keywords: ["MCP", "CLI", "Notion", "Git"]

  - name: "process_changes"
    description: "Process changes"
    keywords: ["change", "modify", "add", "delete"]

  - name: "bug_fixes"
    description: "Bug fixes"
    keywords: ["bug", "error", "failure"]

  - name: "best_practices"
    description: "Best practices"
    keywords: ["recommended", "suggestion", "pattern", "rule"]

# Filtering rules
filtering:
  # Items to include
  include:
    - "workflow_improvements"
    - "tool_usage"
    - "process_changes"
    - "bug_fixes"
    - "best_practices"

  # Items to exclude
  exclude:
    - "trivial_questions"      # Trivial questions
    - "repeated_questions"     # Repeated questions
    - "off_topic"              # Off-topic questions

  # Exclude keywords
  exclude_keywords:
    - "test"
    - "temporary"
    - "ignore"

# Auto numbering
numbering:
  # Auto increment
  auto_increment: true

  # Start number (after existing Q&A)
  start_from: "auto"  # Auto-detect last number from feedback.md

  # Format
  format: "Q{{number}}"

# Duplicate detection
deduplication:
  # Enable/disable
  enabled: true

  # Similarity threshold (0-1)
  similarity_threshold: 0.8

  # Duplicate handling
  on_duplicate: "merge"  # merge | skip | ask

# Notification settings
notifications:
  # Notify on new Q&A record
  on_new_entry:
    enabled: true
    message: "New Q&A recorded in feedback.md: Q{{number}}"

  # Daily summary
  daily_summary:
    enabled: false
    time: "18:00"

# Export settings
export:
  # Supported formats
  formats:
    - "markdown"
    - "json"
    - "csv"

  # Auto export
  auto_export:
    enabled: false
    format: "json"
    path: "state/qa_export.json"
